(this["webpackJsonpdungeons-n-dragons"]=this["webpackJsonpdungeons-n-dragons"]||[]).push([[0],{20:function(e,a,t){e.exports=t(50)},25:function(e,a,t){},49:function(e,a,t){},50:function(e,a,t){"use strict";t.r(a);var c=t(0),n=t.n(c),r=t(19),s=t.n(r),o=(t(25),t(3));var i=function(){var e=Object(c.useRef)();return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("img",{className:"col-3",src:"https://i.pinimg.com/736x/0e/d0/7d/0ed07dfab7dfeae5262bf0ba400b0ff6--dnd-characters-fantasy-characters.jpg",alt:"Character art"}),n.a.createElement("form",{className:"col-2",onSubmit:function(a){a.preventDefault(),e.current.value.toLowerCase().split(" ")[0]}},n.a.createElement("input",{name:"InitiativeBox",ref:e}))))};var l=function(){return n.a.createElement(i,null)},u=t(1),m=t(5),h=t.n(m),d=function(e){return h.a.post("/api/dnd/users/logIn",e)},b=function(e){return h.a.put("/api/dnd/users/new-user",e)},p=function(e,a){return h.a.put("/api/dnd/users/".concat(e),a)},f=function(e){return h.a.post("/api/dnd/books/save",e)},v=function(e){return h.a.put("/api/dnd/books/save",e)},g=function(e){return h.a.post("/api/dnd/books-by-user/:".concat(e))};var k=function(e){var a=Object(c.useState)([]),t=Object(o.a)(a,2),r=t[0],s=t[1],i=Object(c.useState)([{name:"tiffany"},{name:"kurt"},{name:"ass"},{name:"assballs69"},{name:"heathcliff"},{name:"ri'luaneth"}]),l=Object(o.a)(i,2),m=l[0],h=l[1],d=Object(c.useState)([{name:"reginald",isHostile:!1},{name:"general_zod",isHostile:!0}]),b=Object(o.a)(d,2),p=b[0],k=b[1],w=Object(c.useState)([{name:"ri'luaneth",cap:"Ri'Luaneth"}]),j=Object(o.a)(w,2),O=j[0],x=j[1],y=Object(c.useRef)();function E(e){for(var a=0;a<O.length;a++)if(O[a].name===e)return O[a].cap;e=e.split("_");for(var t,c=[],n=0;n<e.length;n++)(t=e[n].split(""))[0]=t[0].toUpperCase(),t=t.join(""),c.push(t);return c.join("_")}function N(e){var a,t=["You've just turned a player into a toad.","Is... Is that a tiny rain cloud floating over your head...?","Oh.... Now your hair is on fire...","Are... Are you... Translucent...?","Aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaand now it's raining..."],c=t.length,n=Math.round(Math.random()*c)-1,o="You may need more practice. Please consult the spell book if you're having trouble.";a=e?"".concat(e).concat(o):o;var i="".concat(t[n]," ").concat(a);s([].concat(Object(u.a)(r),[{text:i}]))}return n.a.createElement("div",{className:"table"},n.a.createElement("div",{className:"scroll-container table"},n.a.createElement("h1",{className:"scroll-heading"},"Decree Scroll"),n.a.createElement("div",{className:"decree-scroll"},r?r.map((function(e,a){return a>=r.length-30?n.a.createElement("div",{key:a},n.a.createElement("p",{className:"text-align-left"},e.text),e.value?e.value.map((function(e){return n.a.createElement("div",null,e)})):n.a.createElement("p",null)):null})):n.a.createElement("div",null)),n.a.createElement("form",{onSubmit:function(a){a.preventDefault();var t=y.current.value.split(" "),c=y.current.value.toLowerCase().split(" ");switch(c[0]){case"save":var n='To save the game, please recite "save game [insert title]". All spaces in the title must be represented with underscores. ';("game"===c[1]||"game"===c[1])&&c[2]?function(a){var t={id:e.userId,title:a,party:m,NPCs:p,capIsSpecial:O,royalDecrees:r};f(t).then((function(e){console.log(e)})).catch((function(e){console.log(e),v(t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}))}(c[2]):N(n);break;case"roll":if(c[1]){for(var o=c[1].split("d"),i=o[0],l=o[1],d=[],b=0,w=[],j=i;j--;j>0){var I=Math.floor(Math.random()*l+1);w.push(I),d.push("d".concat(l,": ").concat(I)),b+=parseInt(I)}if("drop"===c[2]){var S;switch(c[3]){case"lowest":for(var z=b,D=0;D<w.length;D++)w[D]<z&&(z=w[D]);console.log(z,d),S=d.indexOf("d".concat(l,": ").concat(z)),b-=z;break;case"highest":for(var C=0,_=0;_<w.length;_++)w[_]>C&&(C=w[_]);S=d.indexOf("d".concat(l,": ").concat(C)),b-=C}d[S]="".concat(d[S]," (dropped)")}d.push("sum: ".concat(b));var A=d;s([].concat(Object(u.a)(r),[{text:y.current.value,value:A}]))}else N('Please recite the number of dice and the number of sides with the following incantation: "roll (# of dice)d(# of sides)". Do not use any spaces in between the numbers and the letter d.');break;case"add":switch(c[1]){case"player":switch(c[2]){case"character":case"character:":if(c[3]){var M=c[3];if(m.includes(M)){var P="".concat(E(M)," is already a member of your party.");s([].concat(Object(u.a)(r),[{text:P}]))}else{switch(c[4]){case"special":switch(c[5]){case"capitalize:":case"capital:":case"cap:":case"cap":case"capital":case"capitalize":case"capitalization":case"capitalization:":x({cap:t[3],name:c[3]})}}var R="New player character: ".concat(E(M));h([].concat(Object(u.a)(m),[{name:M}])),s([].concat(Object(u.a)(r),[{text:R}]))}}else N("Please recite a player characters name when next you attempt this spell. ");break;default:N()}break;case"npc":case"npc:":var T=c[3];if(p.includes(T)){var B="".concat(E(T)," is already a member of a non player character.");s([].concat(Object(u.a)(r),[{text:B}]))}var L="New npc: ".concat(T);k([].concat(Object(u.a)(p),[{name:E(T)}])),s([].concat(Object(u.a)(r),[{text:L}]));break;default:N()}break;case"remove":switch(c[1]){case"player":switch(c[2]){case"character":case"character:":var W=c[3];if(m.includes(W)){var J=m.indexOf(m);m.splice(J,1);var H="".concat(E(W)," has left the party.");s([].concat(Object(u.a)(r),[{text:H}]))}else{var U="".concat(E(W)," is not a member of the party");s([].concat(Object(u.a)(r),[{text:U}]))}break;default:N()}break;case"npc":case"npc:":var F=c[2];if(p.includes(F)){var X="".concat(E(F)," is already a member of a non player character.");s([].concat(Object(u.a)(r),[{text:X}]))}var Y="New npc: ".concat(F);k([].concat(Object(u.a)(p),[{name:E(F)}])),s([].concat(Object(u.a)(r),[{text:Y}]));break;default:N()}break;case"party":switch(c[1]){case"members":case"members:":for(var $="Party members: ",G=0;G<m.length;G++)G===m.length-1?$+=" and ".concat(E(m[G].name),"."):$+="".concat(E(m[G].name),", ");s([].concat(Object(u.a)(r),[{text:$}]));break;default:N()}break;case"display":switch(c[1]){case"games":case"games:":g(e.userId).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));break;case"npc:":case"npc":case"npcs":case"npcs:":c[1]="".concat(c[1]," ");var Q="".concat(E(c[1]));if(2===p.length)Q+="".concat(E(p[0].name)," and ").concat(E(p[1].name),".");else for(var V=-1;V<p.length;V++)null!=p[V]&&(V===p.length-1?(Q+=" and ".concat(E(p[V].name),"."),console.log(p[V])):Q+="".concat(E(p[V].name),", "));s([].concat(Object(u.a)(r),[{text:Q}]));break;case"flavor":switch(c[2]){case"text":case"text:":var q="Flavor: ";c[3]=E(c[3]);for(var K=3;K<c.length;K++){for(var Z=0;Z<m.length;Z++)switch(c[K]){case m[Z]:c[K]=E(c[K]);break;default:var ee=c[K-1].split("");"."!==ee[ee.length-1]&&"!"!==ee[ee.length-1]&&"?"!==ee[ee.length-1]||(c[K]=E(c[K]))}q+=" ".concat(c[K])}var ae=q.split("");"."!==ae[ae.length-1]&&"!"!==ae[ae.length-1]&&"?"!==ae[ae.length-1]&&(q+="."),s([].concat(Object(u.a)(r),[{text:q}]));break;default:N()}break;default:N()}break;case"abucus":case"abucus:":case"calculate":case"calculate:":var te,ce,ne,re,se;if(c[1]){for(var oe=c[1].split(""),ie=0;ie<oe.length;ie++)isNaN(oe[ie])&&(re=oe[ie]);ce=c[1].split(re),ne=parseInt(ce[0]),se=parseInt(ce[1])}switch(re){case"+":case"plus":te=parseInt(ne+se);break;case"-":case"minus":te=parseInt(ne-se);break;case"*":case"x":case"multiplied by":te=parseInt(ne*se);break;default:N()}te&&s([].concat(Object(u.a)(r),[{text:te}]));break;case"banana":le=E(le=c[1]),s([].concat(Object(u.a)(r),[{text:"".concat(le," is bananas!")}]));break;case"troglodyte":var le;le=E(le=c[1]),s([].concat(Object(u.a)(r),[{text:"".concat(le," is an uneducated troglodyte.")}]));break;case"action":case"action:":for(var ue,me=0;me<m.length;me++)c[1]===m[me]&&(ue=m[me]);if(ue)switch(c[2]){case"attack":case"attacks":case"attacked":s([].concat(Object(u.a)(r),[{text:"".concat(E(ue)," attacked ")+"${capitalize(object)}"}]))}else s([].concat(Object(u.a)(r),[{text:"".concat(E(c[1])," is not a player")}]));break;case"set":var he,de=c[3];switch(c[1]){case"health":case"hp":he="health";break;case"str":case"strength":he="strength";break;case"dex":case"dexterity":he="dexterity";break;case"con":case"constitution":he="constitution";break;case"int":case"intelligence":he="intelligence";break;case"wis":case"wisdom":he="wisdom";break;case"cha":case"charisma":he="charisma";break;default:N("The options for set are hp (health), str (strength), dex (dexterity), con (constitution), int (intelligence), wis (wisdom), and cha (charisma)")}if(de){for(var be,pe=0,fe=pe;fe<m.length;fe++)c[2]==m[fe].name&&(console.log(m[fe]),be=c[2],pe=fe);if(be){switch(he){case"health":m[pe].health=de;break;case"strength":m[pe].str=de;break;case"dexterity":m[pe].dex=de;break;case"intelligence":m[pe].int=de;break;case"wisdon":m[pe].wis=de;break;case"charisma":m[pe].cha=de}s([].concat(Object(u.a)(r),[{text:"".concat(E(be)," ").concat(he,": ").concat(de)}]))}else N("Please enter a character name next time. ".concat(E(c[2]),' is not a current party member. If you would like to add them, simply type "add party member: ').concat(E(c[2]),". "))}else N("This spell won't work unless you enter a value. ");break;default:for(var ve,ge,ke=0;ke<m.length;ke++)c[0]==m[ke].name&&(ve=!0,ge=ke);if(ve)switch(c[1]){case"stats":case"stats:":var we=[{text:"".concat(E(c[0])," stats:")}];we=[].concat(Object(u.a)(we),[{text:"-Health: ".concat(m[ge].health)}]),we=[].concat(Object(u.a)(we),[{text:"-STR: ".concat(m[ge].str)}]),we=[].concat(Object(u.a)(we),[{text:"-DEX: ".concat(m[ge].dex)}]),we=[].concat(Object(u.a)(we),[{text:"-CON: ".concat(m[ge].con)}]),we=[].concat(Object(u.a)(we),[{text:"-INT: ".concat(m[ge].int)}]),we=[].concat(Object(u.a)(we),[{text:"-WIS: ".concat(m[ge].wis)}]),we=[].concat(Object(u.a)(we),[{text:"-CHA: ".concat(m[ge].cha)}]),s([].concat(Object(u.a)(r),Object(u.a)(we)));break;case"is":switch(c[2]){case"poisoned":case"poisoned.":break;default:N()}break;case"has":switch(c[2]){case"special":switch(c[3]){case"capitalization":case"capitalisation":case"capitalization.":case"capitalisation.":for(var je,Oe=0;Oe<O.length;Oe++)O[Oe].name===c[0]&&(je=Oe);if(je){var xe="".concat(E(c[0])," already has special capitalization. Were you attempting to remove a special capitalization scheme for ").concat(E(c[0]),"?");s([].concat(Object(u.a)(r),[{text:xe}]))}else{var ye="".concat(E(t[0]),"'s new capitalization scheme has been set.");s([].concat(Object(u.a)(r),[{text:ye}])),x([].concat(Object(u.a)(O),[{name:c[0],cap:t[0]}]))}}break;case"not":switch(c[3]){case"special":switch(c[4]){case"capitalization":case"capitalisation":case"capitalization.":case"capitalisation.":for(var Ee,Ne=0;Ne<O.length;Ne++)O[Ne].name===c[0]&&(Ee=Ne);if(Ee){O.splice(Ee);var Ie="".concat(E(c[0])," has not special capitalization.");s([].concat(Object(u.a)(r),[{text:Ie}]))}else{var Se="".concat(E(c[0])," has not special capitalization. Were you attempting to set a special capitalization scheme for ").concat(E(c[0]),"?");s([].concat(Object(u.a)(r),[{text:Se}]))}break;default:N()}break;default:N()}break;default:N()}break;default:N()}else N("")}y.current.value=""}},n.a.createElement("input",{className:"col-12 decree-box",name:"DecreeBox",ref:y}))))},w=t(4);t(48),t(49);var j=function(e){var a=Object(c.useRef)();return n.a.createElement("div",null,n.a.createElement("div",null,e.isDM?n.a.createElement(k,{userId:e.userId,userObj:e.userObj,className:"parchment"}):n.a.createElement(l,{className:"parchment"}),n.a.createElement("form",{onSubmit:function(t){t.preventDefault(),p(e.userId,{screenName:a.current.value}).then((function(e){a.current.value=""}))}},n.a.createElement("label",{htmlFor:"usernameupdate"},"Change screenname here:"),n.a.createElement("input",{className:"col-4 decree-box",name:"usernameupdate",ref:a}))))},O=function(){var e=Object(w.b)().loginWithRedirect;return n.a.createElement("button",{style:{height:71},onClick:function(){return e()},className:"scroll top"},"Log in")},x=function(){var e=Object(w.b)().logout;return n.a.createElement("button",{style:{height:71},className:"scroll top",onClick:function(){return e({returnTo:window.location.origin})}},"Log out")};var y=function(e){return n.a.createElement("div",null,e.children)};var E=function(){var e=Object(w.b)(),a=e.user,t=e.isAuthenticated,r=Object(c.useState)([]),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(c.useState)(""),m=Object(o.a)(u,2),h=m[0],p=m[1],f=Object(c.useState)(!0),v=Object(o.a)(f,2),g=v[0];return v[1],Object(c.useEffect)((function(){a?(p(a.nickname),d({id:a.sub}).then((function(e){console.log(e),l(e.data),p(e.data[0].screenName),console.log(e.data[0].screenName),console.log(JSON.stringify(i)),"[]"===JSON.stringify(e.data)&&b({screenName:a.nickname,id:a.sub}).then((function(e){l(e.data),p(e.data.screenName),console.log("newUser .then working: ".concat(i))})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e),b({screenName:a.nickname,id:a.sub}).then((function(e){l(e.data),p(e.data.screenName),console.log("newUser .then working: ".concat(i))})).catch((function(e){return console.log(e)}))}))):p("")}),[t]),n.a.createElement("div",{className:"App table"},n.a.createElement(y,{className:"table"},n.a.createElement("img",{className:"top",src:"https://www.underconsideration.com/brandnew/archives/dungeons_and_dragons_40_ampersand_detail_black.jpg",alt:"logo",height:75}),t?n.a.createElement(x,{className:"scroll"}):n.a.createElement(O,{className:"scroll"}),n.a.createElement("p",null,h)),t?n.a.createElement(j,{isDM:g,userId:a.sub,user:a}):n.a.createElement("p",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(w.a,{domain:"dungeons-and-dragons.us.auth0.com",clientId:"1jJeX74sLijeoVcDiPaRQD8wBEoGyIBr",redirectUri:window.location.origin},n.a.createElement(E,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.e8ce7030.chunk.js.map